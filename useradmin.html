<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>useradmin</title>
	<link rel="stylesheet" type="text/css" href="./layui/css/layui.css">
	<script type="text/javascript" src="./js/jquery-2.1.0.js"></script>
	<script type="text/javascript" src="./layui/layui.js"></script>
	<link rel="stylesheet" type="text/css" href="./css/common.css">
</head>
<body class="layui-layout-body" style="background-color: #F2F2F2;">
    <div class="layui-layout layui-layout-admin">
      <div class="layui-header" style="background-color:#327889">
        <div class="layui-logo"><a href="index.html" style="color: white;"> 会议室预约系统</a></div>
        <!-- 头部区域（可配合layui已有的水平导航） -->
        <ul class="layui-nav layui-layout-left" lay-filter="left_top_nav">
          <li class="layui-nav-item"><a href="javascript:;">用户管理</a></li>
          <li class="layui-nav-item"><a href="">会议室管理</a></li>
          <li class="layui-nav-item"><a href="javascript:;">预约管理</a></li>
        </ul>
        <ul class="layui-nav layui-layout-right" lay-filter="right_top_nav">
          <li class="layui-nav-item">
            <a href="javascript:;">
              <img src="./layui/images/face/0.gif" class="layui-nav-img">
              <span id="u_name"></span>
            </a>
            <dl class="layui-nav-child">
              <dd><a href="">基本资料</a></dd>
              <dd><a href="">安全设置</a></dd>
            </dl>
          </li>
          <li class="layui-nav-item"><a href="javascript:;" data-id="logout">注销</a></li>
        </ul>
      </div>
      
      <div class="layui-body">
        <!-- 内容主体区域 -->
        <div>
		    <div class="layui-container">
				<div class="layui-row">
					<div class="layui-col-md2" style="border: 1px solid white;">
    					<div class="layui-box" style="padding: 10px;">
    						<div class="layui-inline">
    							<img class="t_header" class="img a" src="images/用户中心/u50.svg">
    							<p class="t_detail">
    								<span class="layui-inline" id="s_account">123456</span>
    								<span class="layui-inline" id="s_user">xxx</span>
    								<span class="layui-inline">管理员</span>
    							</p>
    						</div>
    					</div>
    					<div class="layui-box">
    						<div class="layui-inline">
    							<div class="left_top_nav">
    								<ul>
										<li><a href="">用户管理></a></li>
										<li><a href="">会议室管理></a></li>
										<li><a href="">预约管理></a></li>
									</ul>				
    							</div>
    						</div>
    					</div>
    					<div class="layui-box">
    						<div class="layui-inline">
    							<div class="left_bottom_nav">
    								<ul>
										<li><a href="">切换到用户></a></li>
										<li><a href="">注销></a></li><br />
									</ul>				
    							</div>
    						</div>
    					</div>
					</div>
					<div class="layui-col-md10" style="border: 1px solid white;">
						<div class="layui-card">
						  	<div class="layui-card-header">用户管理</div>
						  	<div class="layui-card-body">
						    	<div id="tabledata" lay-filter="tbdata"></div>
						    	<script type="text/html" id="toolbar">
								 	<div class="layui-inline" lay-event="add"><i class="layui-icon layui-icon-add-1"></i></div>
								 	<div class="layui-inline" lay-event="edit"><i class="layui-icon layui-icon-edit"></i></div>
								 	<div class="layui-inline" lay-event="delete"><i class="layui-icon layui-icon-delete"></i></div>
								 	<div class="layui-inline" lay-event="refresh"><i class="layui-icon layui-icon-refresh"></i></div>
									<div class="layui-inline" style="float:right;height:29px;" title="搜索" lay-event="search"><i class="layui-icon layui-icon-search"></i></div> 
									<input type="text" id="username" style="width:200px;float:right;height:30px;" placeholder="请输入姓名" autocomplete="off" class="layui-input">
								</script>
						    	<script type="text/html" id="toolrow">
								  <a class="layui-btn layui-btn-primary layui-btn-xs" lay-event="detail">查看</a>
								  <a class="layui-btn layui-btn-xs" lay-event="edit">编辑</a>
								  <a class="layui-btn layui-btn-danger layui-btn-xs" lay-event="del">删除</a>
								</script>
						  	</div>
						</div>
					</div>
				</div>
			</div>
        </div>
      </div>
      
      <div class="layui-footer">
        <!-- 底部固定区域 -->
        @常熟理工学院计算机学院
      </div>
    </div>
	<script type="text/javascript">
        $(function(){
            var admin=sessionStorage.admin;
            var adacount=sessionStorage.aacount;
            $("#u_name").text(admin);
            $("#s_user").text(admin);
            $("#s_acount").text(adacount);
        });
		layui.use(['element','table'],function(){
			var element=layui.element,
			table=layui.table;
			table.render({
		        elem: '#tabledata'
		        ,data:[
		        {id:1,username:"张三",acounter:"123456",email:'123456@qq.com',auth:"普通管理员",status:"正常"},
		        {id:1,username:"张三",acounter:"123456",email:'123456@qq.com',auth:"普通管理员",status:"正常"},
		        {id:1,username:"张三",acounter:"123456",email:'123456@qq.com',auth:"普通管理员",status:"正常"},
		        {id:1,username:"张三",acounter:"123456",email:'123456@qq.com',auth:"普通管理员",status:"正常"},
		        {id:1,username:"张三",acounter:"123456",email:'123456@qq.com',auth:"普通管理员",status:"正常"},
				{id:1,username:"张三",acounter:"123456",email:'123456@qq.com',auth:"普通管理员",status:"正常"},
				{id:1,username:"张三",acounter:"123456",email:'123456@qq.com',auth:"普通管理员",status:"正常"},
				{id:1,username:"张三",acounter:"123456",email:'123456@qq.com',auth:"普通管理员",status:"正常"},
				{id:1,username:"张三",acounter:"123456",email:'123456@qq.com',auth:"普通管理员",status:"正常"},
				{id:1,username:"张三",acounter:"123456",email:'123456@qq.com',auth:"普通管理员",status:"正常"},
				{id:1,username:"张三",acounter:"123456",email:'123456@qq.com',auth:"普通管理员",status:"正常"},
				{id:1,username:"张三",acounter:"123456",email:'123456@qq.com',auth:"普通管理员",status:"正常"},
				{id:1,username:"张三",acounter:"123456",email:'123456@qq.com',auth:"普通管理员",status:"正常"},
				{id:1,username:"张三",acounter:"123456",email:'123456@qq.com',auth:"普通管理员",status:"正常"},
				{id:1,username:"张三",acounter:"123456",email:'123456@qq.com',auth:"普通管理员",status:"正常"}
		        ]
		        ,cellMinWidth: 80 //全局定义常规单元格的最小宽度，layui 2.2.1 新增
		        ,page: true
		        ,id:'utable'
		        ,toolbar:'#toolbar'
		        ,cols: [[
		         {type: 'checkbox', fixed: 'left'}
		        ,{field:'id', width:80, title: '编号'}
		        ,{field:'username', width:120, title: '姓名'}
		        ,{field:'acounter', width:100, title: '用户名'}
		        ,{field:'email', width:100, title: '邮箱'}
		        ,{field:'auth', width:100, title: '权限'}
		        ,{field:'status', width:100, title: '状态'}
		        ,{field:'right',width:200, title: '操作',toolbar: '#toolrow'}
		        ]]
		    });

			//监听头工具栏事件
    table.on('toolbar(tbdata)', function(obj){
        var checkStatus = table.checkStatus(obj.config.id)
        ,data = checkStatus.data; //获取选中的数据
        switch(obj.event){
            case 'add':
                layer.open({
                    type:2
                    ,title:'新增操作'
                    ,area:['400px','500px']
                    ,content:''
                    ,success: function(layero, index){
                        var body=layer.getChildFrame('body',index);
                        
                    }
                });
                break;
            case 'edit':
                if(data.length === 0){
                    layer.msg('请选择一行');
                } else if(data.length > 1){
                    layer.msg('只能同时编辑一个');
                } else {
                    layer.msg('编辑 [uid]：'+ data[0].uid);
                    layer.open({
                        type:2
                        ,title:'编辑操作'
                        ,area:['400px','500px']
                        ,content:''
                        ,success: function(layero, index){
                            var body=layer.getChildFrame('body',index);
                            
                        }
                    });
                }
                break;
            case 'delete':
                if(data.length === 0){
                    layer.msg('请选择一行');
                } else {
                    layer.msg('删除');
                    layer.confirm('真的删除行么', function(index){
                        layer.close(index);
                        //向服务端发送删除指令
                    });
                }
                break;
            case 'refresh':
                layer.msg('刷新');
                table.reload('utable',{
                });
                break;
            case 'search':
                var keyworld=$("#username").val();
                layer.msg('搜索'+keyworld);
                table.reload('utable',{
                    where:{skeyworld:keyworld}
                    ,page:{curr:1}
                });
                break;
        };
    });
    //监听行工具事件
    table.on('tool(tbdata)', function(obj){ //注：tool 是工具条事件名，test 是 table 原始容器的属性 lay-filter="对应的值"
        var data = obj.data //获得当前行数据
        ,layEvent = obj.event; //获得 lay-event 对应的值
        if(layEvent === 'detail'){
            layer.msg('查看操作');
        } else if(layEvent === 'del'){
            layer.confirm('真的删除行么', function(index){
            obj.del(); //删除对应行（tr）的DOM结构
            layer.close(index);
            //向服务端发送删除指令
        });
        } else if(layEvent === 'edit'){
            layer.msg('编辑操作');
        }
    });

		});
	</script>
</body>
</html>